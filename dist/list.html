<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link href="css/index.css" rel="stylesheet" />
		<style type="text/css">
			@charset 'utf-8';
			html,body,ul,li,ol,dl,dd,dt,p,h1,h2,h3,h4,h5,h6,form,fieldset,legend,img,input,figure,figcaption{margin:0;padding:0;}
			h1,h2,h3,h4,h5,h6{font-size:16px;font-weight:normal;}
			ul,ol,li{list-style:none;}
			b,strong{font-weight:normal;}
			em,i{font-style:normal;}
			a,u{text-decoration: none;}
			input{outline:none;}
			
			.clearfix:after{clear:both; content:''; font-size:0; display:block; visibility:hidden; height:0}
			html,body{ min-width: 1200px;font-size: 12px;font-family: "微软雅黑";margin: 0 auto;width: auto;}
			font: 12px/1.5 "Helvetica Neue",Helvetica,Arial,"Microsoft Yahei","Hiragino Sans GB","Heiti SC","WenQuanYi Micro Hei",sans-serif;
		</style>
		<style type="text/css">
		
			#wrap .p31{
				padding: 12px 0;
				font-size: 12px;
				line-height: 12px;
				text-align: left;	
			}
			#wrap .p12{
				width: 1200px;
				padding-top: 15px ;
				height: 27px;
				border: 1px solid #a4a4a4;
				margin-bottom: 12px;
			}
			#wrap dt{
				color: #000000;
				padding-left: 48px;
				float: left;
			}
			#wrap a{
				display: block;
				color: #a4a4a4;
				float: left;
				margin-left: 15px;
			}
		
		</style>
		
	</head>
	<body>
		<script src="js/startMove.js" ></script>
		<script src="js/javascript.js" type="text/javascript"></script>
		<script src="js/jquery.js"></script>
		<script src="js/ajax.js"></script>
		
			<!-- 顶部banner end -->
		</div>
		<div class="sec1">
			<div class="layout clearfix">
				<ul class="u-1 clearfix">
					<li>
						
						<a href="#">首页</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">华为官网</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">荣耀官网</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">花粉俱乐部</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">帮助中心</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">V码（优购码）</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">企业购</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">Select Region</a>
					</li>
					<li class="download-nav">											
					    <p class="shortcut"></p>							
						<a class="h" href="#">下载APP</a>					
					 		<div class="b">
					 			<div class="dropdown-more">
					 				<div class="code">
	                                    <a class="code" href="https://www.vmall.com/appdownload" target="_blank" onclick="pushHeaderMsg(&#39;下载客户端img&#39;,&#39;https://www.vmall.com/appdownload&#39;)">
	                                        
	                                    <img src="https://res.vmallres.com/appdownload/home/qrcode_vmall_new_app01.png?20170221" class="QRcode">
	                                    <p>扫一扫，<a href="https://www.vmall.com/appdownload" target="_blank" onclick="pushHeaderMsg(&#39;下载客户端&#39;,&#39;https://www.vmall.com/appdownload&#39;)">下载客户端</a></p>
	                                </div>
					 			</div>
					 		</div>											
					</li>
					<li class="splendid">
						<p class="shortcut"></p>
						<a href="#">更多精彩</a>
						<div class="splendid_more clearfix">
								<div><a href="#">MEUI</a></div>
								<div><a href="#">应用市场</a></div>
								<div><a href="#">华为终端空间</a></div>
								<div><a href="#">开发者联盟</a></div>
						</div>
					</li>
					
				</ul>
				
				
				<ul class="u-2 clearfix">
					<li>
	
						<a href="#">请登录</a>
					</li>
					<li>
						
						<a href="#">注册</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="#">我的订单</a>
					</li>
					<li>
						<p class="shortcut"></p>
						<a href="/cart2?t=15392383249191539238487239" class="icon-minicart" rel="nofollow" timetype="timestamp" target="blank" onclick="pushMyCartMsg()">
                            <img style="width: 28px;height: 14px;" src="images/gouwuche (1).jpg"/>购物车(0)
						</a>
					</li>
				</ul>
			</div>		
			
			<div class="header">
				<div class="header-con clearfix">
					<div class="logo">
						<a href="#"><img src="https://res.vmallres.com/pimages/temp/product/20170703105852645577.png" alt="Vmall.com - 华为商城"></a>
						<em></em>
						<a href="#"><img src="https://res.vmallres.com/pimages//sale/2018-05/20180528111304651.png"></a>
					</div>
					
					<div class="naver">
	    				<ul id="naver" class="clearfix">
	    	    			<li id="zxnav_0" data-id="0">
	        					<a href="http://127.0.0.1:8020/huawei/list.html#" target="_blank"><span>手机</span></a>
	        					<input id="zxnav_0_flag" type="hidden" autocomplete="off" value="yes">
								<input id="zxnav_0_name" type="hidden" autocomplete="off" value="手机">
	        				</li>
	    					<li id="zxnav_1" data-id="1">
	        					<a href="http://127.0.0.1:8020/huawei/list.html#" target="_blank"><span>笔记本电脑</span></a>
	        					<input id="zxnav_1_flag" type="hidden" autocomplete="off" value="yes">
								<input id="zxnav_1_name" type="hidden" autocomplete="off" value="笔记本电脑">
	        				</li>
	    					<li id="zxnav_2" data-id="2">
	        					<a href="http://127.0.0.1:8020/huawei/list.html#" target="_blank"><span>平板&amp;穿戴</span></a>
	        					<input id="zxnav_2_flag" type="hidden" autocomplete="off" value="yes">
								<input id="zxnav_2_name" type="hidden" autocomplete="off" value="平板&amp;穿戴">
	        				</li>
	    					<li id="zxnav_3" data-id="3">
	        					<a href="http://127.0.0.1:8020/huawei/list.html#" target="_blank"><span>智能家居</span></a>
	        					<input id="zxnav_3_flag" type="hidden" autocomplete="off" value="yes">
								<input id="zxnav_3_name" type="hidden" autocomplete="off" value="智能家居">
	        				</li>
	    					<li id="zxnav_4" data-id="4">
	        					<a href="http://127.0.0.1:8020/huawei/list.html#" target="_blank"><span>配件</span></a>
	        					<input id="zxnav_4_flag" type="hidden" autocomplete="off" value="yes">
								<input id="zxnav_4_name" type="hidden" autocomplete="off" value="配件">
	        				</li>
	        				<li>
	        					<a href="http://127.0.0.1:8020/huawei/list.html#" target="_blank"><span>荣耀专区</span></a>
	        				</li>
	    				</ul>
					</div>
					
					
					<div class="right">
            <!-- 搜索条-焦点为search-form增加className:hover -start -->
			            <div class="search-bar relative" id="searchBar-area">
			                <div class="search-bar-form" id="search-bar-form">
			                    <form method="get" onsubmit="return search(this)">
			                        <input type="text" class="text" maxlength="200" id="search-kw" autocomplete="off">
			                        <input type="submit" class="button" value="搜索"> 
			                        <input type="hidden" id="channelType" name="channelType" value="1">
			                        <input type="hidden" id="default-search" value="HUAWEI P9 Plus">
			                    </form>
			                </div>
			                <div class="search-bar-key" id="search-bar-key">
			                     <div class="searchBar-key">
										<a href="https://www.vmall.com/search?keyword=%E9%BA%A6%E8%8A%927" target="_blank" rel="nofollow">麦芒7</a>
										<a href="https://www.vmall.com/search?keyword=HUAWEI+P20" target="_blank" rel="nofollow">HUAWEI P20</a>
								</div> 
			                </div>
			                
			            </div>
            		</div>
					
				</div>
			</div>
						
		</div>



<!--瀑布流-->
	<div id="wrap" class="clearfix">
		<div class="p31">首页&nbsp;&nbsp;>&nbsp;&nbsp;手机</div>	
		<div class="p12">
			<dt>分类</dt>
			<a href="#">荣耀</a>
			<a href="#">HUAWEI P系列</a>
			<a href="#">荣耀畅玩系列</a>
			<a href="#">HUAWEI Mate系列</a>
			<a href="#">HUAWEI nove系列</a>
			<a href="#">HUAWEI 麦芒系列</a>
			<a href="#">HUAWEI 畅享系列</a>
			<a href="#">移动4G＋专区</a>
			
		</div>	
		<ul class="clearfix">
			
		</ul>
	</div>
	
	
<!--footer部分-->	


	
	
	


<!--js和jquery代码部分-->

    <!--瀑布流-->
	<script>
        // 1. 显示区域;
        //  json =字符串拼接> 页面;
        //  json 来自于哪里 ? 后端;  ajax 请求获取json;
        
        // 1.1 加载数据;
        // 1.2 渲染页面(拼接字符串);
        
        // 2. 分页按钮区域;
        // 2.1 根据条件渲染数据;
        // 2.2 添加事件; => 重新渲染页面;
        
        function Pagination(){
        }
        Pagination.prototype.init = function(){
            // 选择;
            this.wrap = document.querySelector("#wrap ul");
            this.clientHeight = document.documentElement.clientHeight;
            // 一个开关避免高频词进行数据请求;
            this.loading = false;
            this.now_page = 0;
            this.loadJson()
            .then(function(json){
                this.data = json;
                this.total = Math.ceil(json.count / 5);
                this.renderPage();
            }.bind(this))

            this.handleEvent() 
        }
        // 因为加载数据是异步;
        // 又因为整个功能没有数据就没正常执行，所以把其余代码要放在数据加载成功的回调函数里; => promise;
        Pagination.prototype.loadJson = function(){
            return new Promise(function(success,error){
                var xhr = new XMLHttpRequest();
                xhr.open("GET","php/data.json");
                xhr.send(null);
                xhr.onload = function(){
                    if(xhr.status == 200){
                        // 如果返回值是字符串那么将字符串转换为json;
                        var json = typeof xhr.response == "string" ?JSON.parse(xhr.response) : xhr.response;
                        success(json)
                    }else{
                        error("请求出错");
                    }
                }
            })
        }
        Pagination.prototype.renderPage = function(){
            // 渲染页面;
            var list =  this.data.subjects;
            var html = "";
            // 起始点和终止点;
            // 第几页   	范围 	for循环起始点	for循环终止点
            // 0	        0~3	            0	        3
            // 1	        4~7	            4	        7
            // 2	        8~11	        8	        11
            // 3	        12~15	        12	        15
            // 4	        16~19	        16	        19
            // 5	        20~23	        20	        23
            // 6	        24~27	        24	        27
            // n	                     4 * n       	4 * n  + 3
            for(var i = 5 * this.now_page ; i <= 5* this.now_page + 4; i ++){
                html += `
                        <li>
                            <img src="${list[i].images.small}" alt="">
                            <p>${list[i].title}</p>
                            <div class="similar">￥899</div>
                        </li>`
            }
            this.wrap.innerHTML += html;
            this.loading = false;   
        }
        Pagination.prototype.handleEvent = function(){
            onscroll = this.load.bind(this)
        }
        Pagination.prototype.load = function(event){
            if(this.loading) return 0 ;

            var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
            var showHeight = scrollTop + this.clientHeight;
            
           //最后一个元素的高度;
            var eleChildren = this.wrap.getElementsByTagName("li");
            var lastChildren = eleChildren[eleChildren.length - 1];
            var lastTop = lastChildren.offsetTop;
            // console.log(showHeight,lastTop);
            // 判断是否该加载数据;
            if(lastTop <= showHeight){
                // 加载数据;
                // 加载过程之中 不重复加载;
                // console.log("加载数据");
                this.loading = true;
                this.now_page ++;  

                if(this.now_page > this.total){
                    return 0;
                }

                this.renderPage();
                // document.documentElement.scrollTop = 0;
                // console.log(1);
            }


           // 获取 几个值;
           // 显示的高度;
           // 最后一张图片的高度;

        }   
        var pagination = new Pagination();
        pagination.init();

    </script>
    
    
    <script type="text/javascript">
    	turn_top.onclick = function(){
    		var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
    		scrollTop = "0"
    	}
    </script>
    
    
    <script type="text/javascript">
    	$(window).scroll(function(){ 
	        var clientHeight = document.documentElement.clientHeight;
	        if($(this).scrollTop() > clientHeight){
	            $(".divSou").stop().animate({
	                top:0
	            },200)
	        }
	        if($(this).scrollTop() <= clientHeight){
	            $(".divSou").stop().animate({
	                top:"-55"
	            },200)
	        }
	    });

    </script>
    

	
	</body>
</html>
